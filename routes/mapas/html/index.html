<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mapa de Viabilidad Energ√©tica</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  

  <!-- Leaflet (SIEMPRE primero) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin></script>

  <!-- GeoTIFF + Plotty + Leaflet-Geotiff (jsDelivr, versiones fijas) --><script defer src="https://cdn.jsdelivr.net/npm/geotiff@2.0.7/dist-browser/geotiff.min.js"></script>
  <script src="/routes/mapas/vendor/geotiff.min.js"></script>
  <script src="/routes/mapas/vendor/plotty.min.js"></script>
  <script src="/routes/mapas/vendor/leaflet-geotiff.min.js"></script>
  <script src="/routes/mapas/vendor/leaflet-geotiff-plotty.min.js"></script>  

  <!-- Tu JS al final del body -->
  <script src="/routes/mapas/js/script.js"></script>

  <!-- Leaflet Geocoder -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
  <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

  <!-- Estilos -->
  <link rel="stylesheet" href="/routes/mapas/css/styles.css" />
</head>

<body class="body-page flex flex-col items-center justify-start min-h-screen px-4 pb-12">

  <h1 class="titulo-principal mt-6 text-center">Mapa de Viabilidad Energ√©tica Global</h1>

  <div class="boton-regresar-container mt-2">
    <a href="/routes/inicio/html/index.html" class="boton-regresar">‚Üê Regresar al inicio</a>
  </div>

  <p class="texto-descriptivo max-w-3xl mt-4 mb-6 text-center leading-relaxed">
    La imagen proviene de un GeoTIFF donde cada p√≠xel representa un √°rea de
    <span class="resaltado">2 √ó 2 km</span>. El panel lateral muestra el raster; al hacer clic se lee el valor del p√≠xel.
  </p>

  <div class="mapa-general flex flex-col md:flex-row w-full max-w-6xl gap-6">
    <!-- Mapa principal -->
    <div class="map-container relative rounded-2xl overflow-hidden shadow-lg md:w-2/3 mx-auto">
      <div id="map" class="rounded-2xl w-full h-96 md:h-[500px]"></div>
      <div class="info-sobre-mapa absolute top-3 right-3 z-[9999]">
        <button id="infoBtn" class="boton-info">‚ÑπÔ∏è</button>
        <div id="infoPopup" class="popup-info hidden">
          <p>Selecciona una ubicaci√≥n y pulsa <span class="resaltado">Enviar</span>.</p>
        </div>
      </div>
    </div>

    <!-- Panel GeoTIFF -->
    <div id="mapaTif" class="mapa-tif hidden md:w-1/3 h-96 md:h-[500px] flex items-center justify-center bg-gray-800/80 rounded-lg text-gray-300 italic">
      üó∫Ô∏è Vista GeoTIFF
    </div>
  </div>

  <div class="controles-mapa flex flex-col items-center justify-center gap-3 mt-4 w-full max-w-6xl">
    <p id="coords" class="texto-coords text-[#38bdf8] font-mono text-sm">Selecciona un punto...</p>
    <button id="sendBtn" class="boton-enviar">Analisis de mapeo geografico</button>
    <button id="sendBtn" class="boton-enviar">Analisis de datos</button>
  </div>

  <div id="resultados" class="resultados hidden bg-[#1e293b]/80 text-white rounded-2xl p-6 w-full max-w-6xl mt-6 shadow-lg">
    <h2 class="titulo-datos text-xl font-semibold mb-3">Resultados del an√°lisis</h2>
    <p id="infoSeleccion" class="info-seleccion mb-4 text-sm italic">A√∫n no se ha seleccionado una ubicaci√≥n.</p>
    <div class="contenedor-datos grid grid-cols-3 gap-4">
      <p><span class="font-semibold">Temperatura:</span> <span id="tempDato">-- ¬∞C</span></p>
      <p><span class="font-semibold">Radiaci√≥n solar:</span> <span id="radDato">-- W/m¬≤</span></p>
      <p><span class="font-semibold">Velocidad del viento:</span> <span id="vientoDato">-- km/h</span></p>
    </div>
  </div>

</body>
</html>
